; (function ($, elementor) {

    $(window).on("elementor/frontend/init", function () {

        elementorFrontend.hooks.addAction(
            "frontend/element_ready/sixam-nav-menu.default",
            function ($scope) {

               // Check Contact form recaptcha is validated or not
                $(document).ready(function () {
					
 					$("a").click(function () {
                        $(this).blur();
                    });		
					
					$('#guest_subscription input.wpcf7-submit').prop('disabled', true);
                    $('.wpcf7 form #concent_checkbox input[type=checkbox]').change(function () {
                        if ($(this).is(':checked')) {
                            $('#guest_subscription input.wpcf7-submit').prop('disabled', false);
                        } else {
                            $('#guest_subscription input.wpcf7-submit').prop('disabled', true);
                        }
                    })  
					
					$('#admin_panel_demo .sixam-icon-box-btn > a').click(function(event){
						event.preventDefault();
						
						console.log('admin_panel_demo');
						
						if(localStorage.getItem('registered_user')){
							window.open('https://drivemond-admin.codemond.com/admin', '_blank');
							return;
						}
						$("#admin_panel_form").fadeIn();
					}) 		
					$('#user_app_demo .sixam-icon-box-btn > a').click(function(event){
						event.preventDefault();
						$("#user_app_form").fadeIn();
					})
					$('#driver_app_demo .sixam-icon-box-btn > a').click(function(event){
						event.preventDefault();
						$("#driver_app_form").fadeIn();
					})

					$('.close_form').click(function(event){
						event.preventDefault();
						 $(".demo_form").fadeOut();
					})

				   $('.close_form').focusout(function(){
					   $(".demo_form").fadeOut();
				   })		
					
                    var form = $('.wpcf7 form');
                    var submitButton = form.find('[type="submit"]');
                    var recaptchaContainer = form.find('.wpcf7-recaptcha');					
                    if (typeof grecaptcha != 'undefined') {
                        grecaptcha.ready(function () {
                            submitButton.on('click', function (event) {
                                var recaptchaResponse = grecaptcha.getResponse();								
                                if (!recaptchaResponse) {
                                    event.preventDefault();
                                    return false;
                                } 							
								
								$(document).on('wpcf7mailsent', function (event) {
									if (event.originalEvent.detail.contactFormId == 5) {
										localStorage.setItem('registered_user', true)
										url = 'https://drivemond-admin.codemond.com/admin';
										window.open(url, '_blank');
									}
								});
                            });
                        });
                    }

                    if ($('.wpcf7-form').length) {
                        var currentPageTitle = $('title').text().split(' ')[0];
                        $('input[name="sa_page_url"]').val(currentPageTitle);
                    }
                })				              
                // Show Header menu with shadow while scroll down on devices bigger than mobile
                var scroll_pos = 0;				
				var lastScrollTop = 0;			
				if(! window.location.href.match('installation')){									
					$(window).on('scroll', function () {
						st = $(this).scrollTop();

						if (st < lastScrollTop && st > 0) {

							$(".header-section").addClass('nav_shadow active');
						}
						else {

							$(".header-section").removeClass('nav_shadow active');
						}
						lastScrollTop = st;
					});
				}

                $(".nav-toggle").on("click", () => {
                    $(".nav-toggle").toggleClass("active");
                    $(".menu").toggleClass("active");
                });
                $('.__submenu').closest('li').css({
                    'position': 'relative',
                })
                $('.mega-menu, .__submenu').closest('li').find('.nav-link').addClass('caret--icon')
                if ($(window).width() > 1025) {
                    $('.menu li .nav-link').on('click', function (e) {
                        if ($(window).width() < 1025) {
                            const element = $(this).parent("li");
                            if (element.hasClass("open")) {
                                element.removeClass("open");
                                element.find("li").removeClass("open");
                                element.find(".__submenu, .mega-menu").slideUp(300, "swing");
                            } else {
                                element.addClass("open");
                                element.children(".__submenu, .mega-menu").slideDown(300, "swing");
                                element.siblings("li").children(".__submenu, .mega-menu").slideUp(300, "swing");
                                element.siblings("li").removeClass("open");
                                element.siblings("li").find("li").removeClass("open");
                                element.siblings("li").find(".__submenu, .mega-menu").slideUp(300, "swing");
                            }
                        }
                    })
                }
                $('.content .title').on('click', function () {
                    if ($(window).width() < 1025) {
                        const element = $(this).closest('.mega-menu-left, .mega-menu-right');
                        if (element.hasClass("open")) {
                            element.removeClass("open");
                            element.find(".content-menu").slideUp(300, "swing");
                        } else {
                            element.addClass("open");
                            element.find(".content-menu").slideDown(300, "swing");
                            element.siblings(".mega-menu-left, .mega-menu-right").find(".content-menu").slideUp(300, "swing");
                            element.siblings(".mega-menu-left, .mega-menu-right").removeClass("open");
                            element.siblings(".mega-menu-left, .mega-menu-right").find(".content-menu").slideUp(300, "swing");
                        }
                    }
                })

                // Sub Menu Child
                $('.hori_item_between_wrapper div.__submenu_child').closest('li').find('.submenu-link').addClass('caret--icon open');

                $('.hori_item_between_wrapper span.caret_icon').on('click', function (e) {
                    e.preventDefault();

                    const element = $(this).parent().siblings('div.__submenu_child');

                    if (element.hasClass("open")) {
                        $(this).closest('.submenu-link').removeClass('open');
                        $(this).removeClass('open');
                        element.removeClass("open");
                        element.slideUp(300, "swing");
                    } else {
                        $(this).closest('.submenu-link').addClass('open');
                        $(this).addClass('open');
                        element.addClass("open");
                        element.slideDown(300, "swing");
                    }
                })

                // Show Current child menu section active
                const currentUrl = window.location.href;
                const currentSection = 'child' + (currentUrl.split('#')[1]);
                $('.hori_item_between_wrapper').find('#' + currentSection).addClass('active_item');

                // Show Current Page active
                const activeMmenu = $('.hori_item_between_wrapper .__submenu.single_menu .submenu-link');

                if (activeMmenu.hasClass('active_item')) {
                    
                    var data_id = $('.hori_item_between_wrapper .__submenu.single_menu .submenu-link.active_item').data('id');
                    var parent_id = data_id.replace('nav_parent_', '#');

                    $('.hori_item_between_wrapper a.nav-link').removeClass('active_item');
                    $('.hori_item_between_wrapper ' + parent_id).addClass('active_item');

                } else {
                    const activeMmenu = $('.hori_item_between_wrapper .__submenu.features_menu .submenu-link');
                    if (activeMmenu.hasClass('active_item')) {
                        activeMmenu.closest('.__submenu').siblings('a').addClass('active_item');
                    }
                }

                // prevent nav menu for redirection in tablet mode
                if ($(window).width() < 1024) {
                    $('.menu li .nav-link.caret--icon').on('click', function (e) {
                        e.preventDefault();
                        if ($(window).width() < 1025) {
                            const element = $(this).parent("li");
                            if (element.hasClass("open")) {
                                element.removeClass("open");
                                element.find("li").removeClass("open");
                                element.find(".__submenu, .mega-menu").slideUp(300, "swing");
                            } else {
                                element.addClass("open");
                                element.children(".__submenu, .mega-menu").slideDown(300, "swing");
                                element.siblings("li").children(".__submenu, .mega-menu").slideUp(300, "swing");
                                element.siblings("li").removeClass("open");
                                element.siblings("li").find("li").removeClass("open");
                                element.siblings("li").find(".__submenu, .mega-menu").slideUp(300, "swing");
                            }
                        }
                    })
                }
            }
        );
    });



})(jQuery, window.elementorFrontend);